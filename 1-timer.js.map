{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\n\nimport flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const input = document.querySelector('#datetime-picker');\n  const button = document.querySelector('button[data-start]');\n  const daysEl = document.querySelector('[data-days]');\n  const hoursEl = document.querySelector('[data-hours]');\n  const minutesEl = document.querySelector('[data-minutes]');\n  const secondsEl = document.querySelector('[data-seconds]');\n  let intervalId = null;\n\n  let userSelectedDate = null;\n  button.disabled = true;\n  syncButtonState();\n\n  console.log(button.classList);\n\n  input.disabled = false;\n\n  const options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      const selectedDate = selectedDates[0];\n      const now = new Date();\n\n      if (selectedDate < now) {\n        showError('Please choose a date in the future');\n        button.disabled = true;\n        syncButtonState();\n        userSelectedDate = null;\n        return;\n      }\n\n      button.disabled = false;\n      syncButtonState();\n\n      userSelectedDate = selectedDate;\n    },\n  };\n\n  flatpickr(input, options);\n\n  function formatTime(ms) {\n    const totalSeconds = Math.floor(ms / 1000);\n\n    const days = Math.floor(totalSeconds / 86400);\n    const hours = Math.floor((totalSeconds % 86400) / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n\n    return {\n      days,\n      hours: hours.toString().padStart(2, '0'),\n      minutes: minutes.toString().padStart(2, '0'),\n      seconds: seconds.toString().padStart(2, '0'),\n    };\n  }\n\n  function showError(message) {\n    iziToast.error({\n      title: 'Error',\n      message: message,\n      position: 'topRight',\n      timeout: 3000,\n      pauseOnHover: true,\n      close: true,\n    });\n  }\n\n  button.addEventListener('click', () => {\n    input.disabled = true;\n    button.disabled = true;\n    syncButtonState();\n\n    if (intervalId) return;\n    intervalId = setInterval(() => {\n      const currentTime = Date.now();\n      const diff = userSelectedDate - currentTime;\n      if (diff <= 0) {\n        daysEl.textContent = '00';\n        hoursEl.textContent = '00';\n        minutesEl.textContent = '00';\n        secondsEl.textContent = '00';\n\n        clearInterval(intervalId);\n        intervalId = null;\n        input.disabled = false;\n      } else {\n        const time = formatTime(diff);\n        daysEl.textContent = time.days;\n        hoursEl.textContent = time.hours;\n        minutesEl.textContent = time.minutes;\n        secondsEl.textContent = time.seconds;\n      }\n    }, 1000);\n  });\n\n  function syncButtonState() {\n    button.classList.toggle('disabled-button', button.disabled);\n  }\n});\n"],"names":["input","button","daysEl","hoursEl","minutesEl","secondsEl","intervalId","userSelectedDate","syncButtonState","flatpickr","selectedDates","selectedDate","showError","formatTime","ms","totalSeconds","days","hours","minutes","seconds","message","iziToast","currentTime","diff","time"],"mappings":"+IAWA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EACzD,IAAIC,EAAa,KAEbC,EAAmB,KACvBN,EAAO,SAAW,GAClBO,IAEA,QAAQ,IAAIP,EAAO,SAAS,EAE5BD,EAAM,SAAW,GA0BjBS,EAAUT,EAxBM,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQU,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAGpC,GAAIC,EAFQ,IAAI,KAEQ,CACtBC,EAAU,oCAAoC,EAC9CX,EAAO,SAAW,GAClBO,IACAD,EAAmB,KACnB,MACD,CAEDN,EAAO,SAAW,GAClBO,IAEAD,EAAmBI,CACpB,CACL,CAE0B,EAExB,SAASE,EAAWC,EAAI,CACtB,MAAMC,EAAe,KAAK,MAAMD,EAAK,GAAI,EAEnCE,EAAO,KAAK,MAAMD,EAAe,KAAK,EACtCE,EAAQ,KAAK,MAAOF,EAAe,MAAS,IAAI,EAChDG,EAAU,KAAK,MAAOH,EAAe,KAAQ,EAAE,EAC/CI,EAAUJ,EAAe,GAE/B,MAAO,CACL,KAAAC,EACA,MAAOC,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACvC,QAASC,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC3C,QAASC,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,CACjD,CACG,CAED,SAASP,EAAUQ,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,WACV,QAAS,IACT,aAAc,GACd,MAAO,EACb,CAAK,CACF,CAEDnB,EAAO,iBAAiB,QAAS,IAAM,CACrCD,EAAM,SAAW,GACjBC,EAAO,SAAW,GAClBO,IAEI,CAAAF,IACJA,EAAa,YAAY,IAAM,CAC7B,MAAMgB,EAAc,KAAK,MACnBC,EAAOhB,EAAmBe,EAChC,GAAIC,GAAQ,EACVrB,EAAO,YAAc,KACrBC,EAAQ,YAAc,KACtBC,EAAU,YAAc,KACxBC,EAAU,YAAc,KAExB,cAAcC,CAAU,EACxBA,EAAa,KACbN,EAAM,SAAW,OACZ,CACL,MAAMwB,EAAOX,EAAWU,CAAI,EAC5BrB,EAAO,YAAcsB,EAAK,KAC1BrB,EAAQ,YAAcqB,EAAK,MAC3BpB,EAAU,YAAcoB,EAAK,QAC7BnB,EAAU,YAAcmB,EAAK,OAC9B,CACF,EAAE,GAAI,EACX,CAAG,EAED,SAAShB,GAAkB,CACzBP,EAAO,UAAU,OAAO,kBAAmBA,EAAO,QAAQ,CAC3D,CACH,CAAC"}